(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{Q2ey:function(o,e,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/book",function(){return n("gKfl")}])},gKfl:function(o,e,n){"use strict";n.r(e);var t=n("nOHt"),a=n("q1tI"),r=n.n(a),u=n("5Yp1"),i=n("ANjH"),c=n("/MKj"),k=n("ZpDd"),s=n("NgOB"),l=n("3Mv1"),d=r.a.createElement,f="/images/avatar-placeholder.png";var b=Object(a.memo)((function(o){var e=o.displayMode,n=o.name,t=o.email,a=o.avatar,r=o.date,u=new Date(r),i=u.getDate(),c=u.getMonth()+1,k=u.getFullYear();return i<10&&(i="0".concat(i)),c<10&&(c="0".concat(c)),d(l.a,{topText:n,bottomText:"".concat(i,"/").concat(c,"/").concat(k," - NOW"),displayMode:e,elevation:1,img:null==a?f:a},d("a",{href:"mailto:".concat(t)},t))})),p=n("Z0lo"),B=r.a.createElement;function m(o){var e;return console.log({userId:o.profile.userId,book:o.search.books.find((e=o.bookInfo.bookId,function(o){return o.bookId===e})),users:o.bookInfo.users,displayMode:o.search.displayMode.toLowerCase()}),{userId:o.profile.userId,book:o.bookInfo.book,users:o.bookInfo.users,displayMode:o.search.displayMode.toLowerCase()}}var I=Object(a.memo)((function(o){var e=o.bookId,n=function(){var o=Object(c.b)();return Object(a.useMemo)((function(){return Object(i.b)({getBookInfoById:k.d,onTakeBook:k.s,onReturnBook:k.i,onTrackBook:k.t,onUntrackBook:k.u,onLikeBook:k.f,onDislikeBook:k.b},o)}),[o])}(),t=n.getBookInfoById,r=n.onTakeBook,u=n.onReturnBook,l=n.onTrackBook,d=n.onUntrackBook,f=n.onLikeBook,I=n.onDislikeBook,v=Object(c.c)(m),g=v.userId,y=v.book,w=v.users,M=v.displayMode,O=Object(a.useState)(null),j=O[0],h=O[1];if(Object(a.useEffect)((function(){j||(console.log("bookinfo mounted"),h(!0),t(e))})),!j||null==y)return null;var T=y.title,D=y.author,E=y.count,_=y.img,L=y.likesCount,N=y.likes,U=y.activeUsers,C=y.trackers;return B(p.a,null,B(s.a,{bookId:e,userId:g,title:T,author:D,count:E,displayMode:M,img:_,likes:N,likesCount:L,activeUsers:U,trackers:C,onTakeBook:r,onReturnBook:u,onTrackBook:l,onUntrackBook:d,onLikeBook:f,onDislikeBook:I}),w.filter((function(o){var e=o.userId;return null!=U[e]})).map((function(o,e){var n=o.userId,t=o.name,a=o.email,r=o.avatar;return B(b,{key:e,name:t,email:a,date:U[n],displayMode:M,avatar:r})})))}));n.d(e,"default",(function(){return g}));var v=r.a.createElement;function g(){var o=Object(t.useRouter)().query.id;return v(u.a,null,null!=o?v(I,{bookId:o}):null)}}},[["Q2ey",1,2,0,3,4,6]]]);